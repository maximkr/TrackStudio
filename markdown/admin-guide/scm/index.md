# Как настроить интеграцию с системами управления исходным кодом (SCM)

TrackStudio поддерживает интеграцию с несколькими системами контроля версий, такими как Subversion, CVS, Bazaar, Perforce, Git и Mercurial. Вы можете использовать несколько хранилищ в разных системах для разных проектов. Из TrackStudio вы сможете просматривать коммиты в хранилище, привязанные к вашим задачам.

Вы можете настроить параметры соединения с вашим хранилищем (или хранилищами) в утилите TrackStudio Server Manager, либо, если ее нет - в любом текстовом редакторе.

## Server Manager

1. Запустите приложение для управления сервером TrackStudio (SMAN).
2. Перейдите в раздел SCM.
3. Отметьте опцию "**Включить SCM интеграцию**", если она не включена
4. Укажите интервал обновления в минутах.
5. Нажмите кнопку "**Добавить**"
6. В открывшемся окне укажите название соединения.
7. Введите номер задачи, соответствующей проекту, интеграцию для которого вы ходите включить. Интеграция будет осуществляться для всех подзадач этой задачи.
8. Выберите тип SCM
9. Укажите корень исходного кода проекта в SCM
10. Укажите данные учетной записи в SCM, через которую будет осуществляться мониторинг.
11. Только для CVS: укажите модуль и кодировку символов.
12. Только для Perforce: укажите путь к клиенту.
13. Нажмите кнопку "**Тест соединения**".
14. Нажмите кнопку "**ОК**", чтобы сохранить параметры соединения.

### Настройка соединения в файлах .properties

Если у вас отсутствует возможность запустить Server Manager, вы можете настроить интеграцию с SCM в файле **trackstudio.scm.properties**

- Откройте файл **trackstudio.scm.properties**
- Включите интеграцию с SCM

```
trackstudio.scm.useSCM=yes
```

- Укажите время обновления информации в минутах

```
trackstudio.scm.updateInterval=10
```

Теперь можно настроить конкретное подключение.

- Для каждого из ваших проектов создайте параметр trackstudio.scm.<name>.tasknum, где tasknum — номер проекта, а <name> — название соединения. Интеграция с SCM будет осуществляться для всех подзадач указанной в этом параметре задачи.

Пример:

```
trackstudio.scm.MyConnection.tasknum=1
```

В этом примере хранилище будет подключено к корневому проекту и интеграция будет осуществляться для всех задач в системе.

- Укажите тип SCM:

```
trackstudio.scm.MyConnection.type=Subversion
```

Также доступны типы **CVS**, **Perforce**, **Bazaar**

- Укажите корень исходного кода проекта в SCM:

```
trackstudio.scm.MyConnection.root=http\://svn.mycompany.com/prj/MyProject/Application/trunk/
```

- Укажите параметры учетной записи в SCM, через которую будет осуществляться мониторинг (разработчики будут отправлять информацию в систему от своего имени).

```
trackstudio.scm.MyConnection.login=login
trackstudio.scm.MyConnection.password=password
```

- Вы также можете указать номер ревизии, с которой начинать индексирование:

```
trackstudio.scm.MyConnection.initialRevision=0
```

### Параметры, специфичные для CVS:

Название модуля в CVS:

```
trackstudio.scm.MyConnection.module
```

Кодировка, используемая в CVS:

```
trackstudio.scm.MyConnection.encoding
```

### Параметры, специфичные для Perforce:

Путь до клиента Perforce:

```
trackstudio.scm.MyConnection.native.client=/usr/local/bin/client
```

## Работа с TrackStudio

Чтобы ваши коммиты в SCM связывались с конкретными задачами TrackStudio, добавляйте в сообщения к коммитам номер (или номера) соответствующих задач в системе.

Например:

```
$ svn commit -m "This message should be added to the task #1 and #2."
```

После того, как TrackStudio обработает информацию, при просмотре задачи будут выводиться логи коммитов в SCM

![](../../images/scm_trackstudio_log.png)

Вы также можете посмотреть логи коммитов ко всем задачам проекта, со ссылками на эти задачи. Для этого в TrackStudio перейдите в нужный вам проект и выберите пункт меню "**Браузер SCM**"

![](../../images/scm_browse.png)
