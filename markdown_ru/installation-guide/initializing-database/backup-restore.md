[Домой](../../index.md) | [Наверх (Создание и настройка базы данных)](index.md)

---

# Резервное копирование и восстановление данных

В этой статье описывается, как выполнить резервное копирование вашего экземпляра TrackStudio, и как восстановить функциональность и данные в случае их повреждения.

## Резервное копирование

В TrackStudio данные и настройки хранятся не только в базе данных, но и в **конфигурационных файлах**, а также в директории с**приложенными файлами**. Одного лишь резервного копирования базы данных недостаточно.

Однако конфигурационные файлы меняются достаточно редко, а база данных - постоянно. Поэтому имеет смысл выполнять резервное копирование данных и штатными средствами СУБД. **Для такого копирования **

**TrackStudio можно не останавливать**

Для полного резервного копирования вам нужно сохранить следующие данные:

- Содержимое базы данных - штатными средствами СУБД, либо путем экспорта данных через **Server Manager**
- Содержимое директории с файлами, которые загружались в TrackStudio. Обычно это директория **upload**. Уточните местоположение директории в свойстве **trackstudio.uploadDir** файла **trackstudio.properties**, либо, если такого файла нет,**trackstudio.default.properties**
- Содержимое директории **etc**, в которой хранятся все настройки, плагины, иконки и т.п. Обычно эта директория расположена в папке, куда установлен ваш экземпляр TrackStudio.

**Перед резервным копированием нужно остановить ваш экземпляр TrackStudio**

## Восстановление из резервной копии

Процедура восстановления из резервной копии зависит от того, какого рода повреждения получил ваш экземпляр TrackStudio. Если данные были утеряны в результате вандализма, взлома или неправильной работы самой TrackStudio - вам понадобится восстановить только содержимое базы данных и директории с закачанными файлами. Если же обрушился диск, сервер, операционная система или иным образом был поврежден сам экземпляр TrackStudio, потребуется переустановка.

Начнем с самого худшего - вы потеряли всё. В таком случае вам нужно [установить](../index.md) ту же самую версию TrackStudio, что была у вас до обрушения. Затем, **не приступая** к настройке TrackStudio и **не запуская** Server Manager (если запустили - выйдите):

- удалите директорию **etc** из нового экземпляра TrackStudio;
- распакуйте на ее место сохраненную вами версию директории **etc**;
- удалите содержимое директории **upload**;
- распакуйте в новую директорию **upload** сохраненные вами файлы из вашей старой директории **upload**;
- если в директории **index** нового экземпляра TrackStudio есть файл **skipindex.flag** - удалите его;
- если у вас есть резервная копия базы данных, выполненная средствами резервирования самой СУБД - восстановите ее по инструкции производителя СУБД. Если резервная копия выполнена через Server Manager - создайте в вашей СУБД базу данных с точно таким же названием и параметрами, какие прописаны в файле **trackstudio.hibernate.properties** (см. в директории **etc**). Затем запустите Server Manager и выполните импорт данных из сохраненного вами файла экспорта, [как это описано в нашей документации](database-export-import-migration.md);

Теперь можно запустить восстановленный экземпляр TrackStudio.

Если уничтожены только данные в базе данных и, вероятно, удалены или изменены некоторые приложенные к задачам файлы, вам не потребуется переустановка TrackStudio. В этом случае:

- остановите ваш экземпляр TrackStudio;
- удалите содержимое директории **upload**;
- распакуйте в директорию **upload** сохраненные вами файлы из вашей старой директории **upload**;
- удалите файл **skipindex.flag** из директории **index**;
- если у вас есть резервная копия базы данных, выполненная средствами резервирования самой СУБД - восстановите ее по инструкции производителя СУБД. Если резервная копия выполнена через Server Manager - удалите существующую базу данных, создайте в вашей СУБД базу данных с точно таким же названием и параметрами. Затем запустите Server Manager и выполните импорт данных из сохраненного вами файла экспорта, [как это описано в нашей документации](database-export-import-migration.md);

Теперь можно запустить восстановленный экземпляр TrackStudio.

---

[Домой](../../index.md) | [Наверх (Создание и настройка базы данных)](index.md)
