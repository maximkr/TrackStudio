[Домой](../../index.md) | [Наверх (Обновление TrackStudio)](index.md)

---

# Обновление c версии 3.5.x до 4.0.x

## Если у Вас вариант TrackStudio Standalone:

1. Скачайте самый свежий дистрибутив TrackStudio 4.0 Standalone
2. Остановите ваш экземпляр TrackStudio
3. Установите TrackStudio 4.0 Standalone в другую директорию
4. Настройте новый экземпляр TrackStudio с использованием программы **Server Manager (sman)**.
5. Если вы используете в качестве базы данных **HSQLDB:**** **Скопируйте все файлы, которые относятся к вашей базе данных (tsdb.*) из директории, где была развернута предыдущая версия в директорию нынешней.
6. Скопируйте все файлы из директории, где хранились приложенные файлы от предыдущей версии в новую. Чтобы узнать, где хранятся вложение, смотрите параметр **trackstudio.uploadDir** в файле **trackstudio.properties**.
7. Удалите содержимое директории с индексом, но не саму директорию. Чтобы определить, где она находится, посмотрите свойство**trackstudio.indexDir** в файле **trackstudio.properties**.
8. Обновите вашу базу данных от TrackStudio, используя sman либо скрипты обновления.
9. Запустите TrackStudio. При первом запуске система обработает вашу базу в соответствии с изменениями, внесенными нами в TrackStudio 4. Содержащиеся в базе скрипты и шаблоны почтовых сообщений будут перенесены в файлы в директории **etc/plugins**. Система также проиндексирует заново задачи и сообщения.
10. Остановите TrackStudio.
11. Вам придется вручную поправить шаблоны почтовых уведомлений, т.к. формат из значительно изменился. Вы можете использовать любые из поставляемых нами шаблонов.
12. После этого вновь запустите TrackStudio.

## Если у Вас вариант TrackStudio WAR:

1. Скачайте самый свежий TrackStudio WAR.
2. Остановите ваш экземпляр TrackStudio
3. Замените старый TrackStudio WAR новым
4. В вашем файле **trackstudio.properties** вставьте следующие строки

```
trackstudio.reportBugsTo
## Time constants
trackstudio.hoursInDay 8
trackstudio.daysInWeek 5
trackstudio.daysInMonth 22
trackstudio.hoursInYear 2000
trackstudio.monthsInYear 12
## Maximum number of items per tree level
trackstudio.maxTreeItems 100
## DecimalFormat for custom-float
trackstudio.decimalFormatUdfFloat 7
## Use compress html
trackstudio.compressHTML yes
```

1. Замените файл **trackstudio.adapter.properties** аналогичным из WAR
2. Сохраните действующие настройки соединения с СУБД из файла **trackstudio.hibernate.properties**. (Действующие настройки обычно расположены в конце файла и не отделены символами #
3. Замените файл **trackstudio.hibernate.properties** входящим в поставку
4. Зайдите в замененный файл и вставьте туда сохраненные вами настройки соединения, закрыв комментариями настройки соединения с HSQL по-умолчанию
5. Удалите содержимое директории с индексом, но не саму директорию. Чтобы определить, где она находится, посмотрите свойство**trackstudio.indexDir** в файле **trackstudio.properties**.
6. Обновите вашу базу данных от TrackStudio, используя скрипты обновления.
7. Запустите TrackStudio. При первом запуске система обработает вашу базу в соответствии с изменениями, внесенными нами в TrackStudio 4. Содержащиеся в базе скрипты и шаблоны почтовых сообщений будут перенесены в файлы в директории **etc/plugins**. Система также проиндексирует заново задачи и сообщения.
8. Остановите TrackStudio.
9. Вам придется вручную поправить шаблоны почтовых уведомлений, т.к. формат из значительно изменился. Вы можете использовать любые из поставляемых нами шаблонов.
10. После этого вновь запустите TrackStudio.

## Примечания

- Standalone и WAR версии полностью совместимы друг с другом и отличаются только поставляемыми компонентами.
- Если вы используете СУБД по-умолчанию (HSQLDB), файлы с базой данных называются *tsdb.lck, tsdb.log, tsdb.properties** *и*tsdb.script.** *Не удаляйте их.
- Директории с индексами и приложенными файлами можно размещать где угодно, нужно только прописать их в соответствующие пункты в **trackstudio.properties**

---

[Домой](../../index.md) | [Наверх (Обновление TrackStudio)](index.md)
