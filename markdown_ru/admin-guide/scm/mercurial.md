[Домой](../../index.md) | [Наверх (Как настроить интеграцию с системами управления исходным кодом (SCM))](index.md)

---

# Как настроить интеграцию с Mercurial

[Mercurial](http://ru.wikipedia.org/wiki/Mercurial) — кроссплатформенная распределённая система управления версиями, разработанная для эффективной работы с очень большими репозиториями кода. Поддержка SCM Mercurial реализована в TrackStudio, начиная с версии 4.0.11.

## Настройка параметров соединения

Вы можете настроить параметры соединения с вашим хранилищем Mercurial в утилите TrackStudio Server Manager, либо, если ее нет — в любом текстовом редакторе.

### Server Manager

- Запустите приложение для управления сервером TrackStudio (SMAN)
- Перейдите в раздел SCM
- Отметьте опцию "**Включить SCM интеграцию**", если она не включена
- Укажите интервал обновления информации в минутах. Для тестирования лучше указать интервал в 1 минуту, для практического использования достаточно 10 минут.

![](../../images/scm_bazaar_1_ru.png)

- Нажмите кнопку "**Добавить**"

![](../../images/sman_mercurial.png)

- В открывшемся окне укажите название соединения
- Введите номер задачи, соответствующей проекту, интеграцию для которого вы хотите включить. Интеграция будет осуществляться для всех подзадач этой задачи.
- Выберите тип SCM: Mercurial
- Укажите корень исходного кода проекта в Mercurial
- Укажите путь до консольной утилиты **hg**. Например, под GNU/Linux **/usr/bin/hg**
- Нажмите кнопку "**Тест соединения**".
- Нажмите кнопку "**ОК**", чтобы сохранить параметры соединения.

### Настройка соединения в файлах .properties

Если у вас отсутствует возможность запустить Server Manager, вы можете настроить интеграцию с Mercurial в файле **trackstudio.scm.properties**

- Откройте файл **trackstudio.scm.properties**
- Включите интеграцию с SCM

```
trackstudio.scm.useSCM=yes
```

- Укажите время обновления информации в минутах

```
trackstudio.scm.updateInterval=10
```

Теперь можно настроить конкретное подключение.

- Для каждого из ваших проектов создайте параметр trackstudio.scm.<name>.tasknum, где tasknum — номер проекта, а <name> — название соединения. Интеграция с SCM будет осуществляться для всех подзадач указанной в этом параметре задачи.

Пример:

```
trackstudio.scm.MyMerc.tasknum=1
```

В этом примере хранилище будет подключено к корневому проекту и интеграция будет осуществляться для всех задач в системе.

- Укажите тип SCM:

```
trackstudio.scm.MyMerc.type=Mercurial
```

- Укажите корень исходного кода проекта в Mercurial:

```
trackstudio.scm.MyMerc.root=/home/winzard/mercurial/repo/
```

- Укажите путь до клиента hg:

```
trackstudio.scm.MyMerc.native.client=/usr/bin/hg
```

## Работа с TrackStudio

Чтобы ваши коммиты в Mercurial связывались с конкретными задачами TrackStudio, добавляйте в сообщения к коммитам номер (или номера) соответствующих задач в системе.

Например:

```
$ hg ci -m "#12 fixed some bugs"
```

После того, как TrackStudio обработает информацию, при просмотре задачи будут выводиться логи коммитов в Mercurial

![](../../images/scm_trackstudio_log.png)

Вы также можете посмотреть логи коммитов ко всем задачам проекта, со ссылками на эти задачи. Для этого в TrackStudio перейдите в нужный вам проект и выберите пункт меню "**Браузер SCM**". Для того, чтобы пользователи с определенной ролью могли видеть этот пункт меню, нужно разрешить им делать это в управлении ролями.

Если в сообщениях к коммитам вы указывали номера задач в системе через одинарную решетку #, то логи коммитов будут выглядеть вот так:

![](../../images/scm_mercurial.png)

Если же номера вы указывали через двойную решетку ##, то в логах будет указан полный путь до задачи.

![](../../images/scm_browse.png)

---

[Домой](../../index.md) | [Наверх (Как настроить интеграцию с системами управления исходным кодом (SCM))](index.md)
